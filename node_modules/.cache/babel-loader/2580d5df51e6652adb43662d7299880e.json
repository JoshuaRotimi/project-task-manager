{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import Swal from\"sweetalert2\";import{collection,getDocs,deleteDoc,doc,addDoc}from\"firebase/firestore\";import Header from\"./Header\";import Table from\"./Table\";import Add from\"./Add\";import Edit from\"./Edit\";import{db}from\"../../config/firestore\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Dashboard=_ref=>{let{setIsAuthenticated}=_ref;const[tasks,setTasks]=useState([]);const[selectedTask,setSelectedTask]=useState(null);const[isAdding,setIsAdding]=useState(false);const[isEditing,setIsEditing]=useState(false);const[newProject,setNewProject]=useState(\"\");const getTasks=async()=>{const querySnapshot=await getDocs(collection(db,\"tasks\"));const allTasks=querySnapshot.docs.map(doc=>({id:doc.id,...doc.data()}));setTasks(allTasks);};useEffect(()=>{getTasks();},[]);const handleEdit=id=>{const[task]=tasks.filter(task=>task.id===id);setSelectedTask(task);setIsEditing(true);};const handleDelete=id=>{Swal.fire({icon:\"warning\",title:\"Are you sure?\",text:\"You won't be able to revert this!\",showCancelButton:true,confirmButtonText:\"Yes, delete it!\",cancelButtonText:\"No, cancel!\"}).then(result=>{if(result.value){// TODO delete document\ntry{deleteDoc(doc(db,\"tasks\",id));}catch(e){console.log(\"Unable to delete task.\");}Swal.fire({icon:\"success\",title:\"Deleted!\",text:\"Task has been deleted.\",showConfirmButton:false,timer:1500});const tasksCopy=tasks.filter(task=>task.id!==id);setTasks(tasksCopy);}});};const addProject=async()=>{if(!newProject){return Swal.fire({icon:\"error\",title:\"Error!\",text:\"Add a valid Project name.\",showConfirmButton:true});}try{await addDoc(collection(db,\"projects\"),{name:newProject});}catch(e){console.log(\"Failed to add New Project\");}Swal.fire({icon:\"success\",title:\"Added!\",text:\"New Project Created!\",showConfirmButton:false,timer:1500}).then(()=>setNewProject(\"\"));};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[!isAdding&&!isEditing&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{setIsAdding:setIsAdding,setIsAuthenticated:setIsAuthenticated}),/*#__PURE__*/_jsx(Table,{tasks:tasks,handleEdit:handleEdit,handleDelete:handleDelete}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newProject\",children:\"Add New Project\"}),/*#__PURE__*/_jsx(\"input\",{id:\"newProject\",type:\"text\",name:\"newProject\",placeholder:\"New Project Name\",value:newProject,onChange:e=>setNewProject(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",value:\"Add Project\",onClick:addProject,children:\"Add Project\"})]})]}),isAdding&&/*#__PURE__*/_jsx(Add,{setIsAdding:setIsAdding,getTasks:getTasks}),isEditing&&/*#__PURE__*/_jsx(Edit,{selectedTask:selectedTask,setIsEditing:setIsEditing,getTasks:getTasks})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","Swal","collection","getDocs","deleteDoc","doc","addDoc","Header","Table","Add","Edit","db","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","_ref","setIsAuthenticated","tasks","setTasks","selectedTask","setSelectedTask","isAdding","setIsAdding","isEditing","setIsEditing","newProject","setNewProject","getTasks","querySnapshot","allTasks","docs","map","id","data","handleEdit","task","filter","handleDelete","fire","icon","title","text","showCancelButton","confirmButtonText","cancelButtonText","then","result","value","e","console","log","showConfirmButton","timer","tasksCopy","addProject","name","className","children","htmlFor","type","placeholder","onChange","target","onClick"],"sources":["/Users/joshuaolorunnipa/Downloads/React Guide/firestore-react-crud-app-main/src/components/Dashboard/index.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Swal from \"sweetalert2\";\nimport {\n  collection,\n  getDocs,\n  deleteDoc,\n  doc,\n  addDoc,\n} from \"firebase/firestore\";\n\nimport Header from \"./Header\";\nimport Table from \"./Table\";\nimport Add from \"./Add\";\nimport Edit from \"./Edit\";\n\nimport { db } from \"../../config/firestore\";\n\nconst Dashboard = ({ setIsAuthenticated }) => {\n  const [tasks, setTasks] = useState([]);\n  const [selectedTask, setSelectedTask] = useState(null);\n  const [isAdding, setIsAdding] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [newProject, setNewProject] = useState(\"\");\n\n  const getTasks = async () => {\n    const querySnapshot = await getDocs(collection(db, \"tasks\"));\n    const allTasks = querySnapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    }));\n    setTasks(allTasks);\n  };\n\n  useEffect(() => {\n    getTasks();\n  }, []);\n\n  const handleEdit = (id) => {\n    const [task] = tasks.filter((task) => task.id === id);\n\n    setSelectedTask(task);\n    setIsEditing(true);\n  };\n\n  const handleDelete = (id) => {\n    Swal.fire({\n      icon: \"warning\",\n      title: \"Are you sure?\",\n      text: \"You won't be able to revert this!\",\n      showCancelButton: true,\n      confirmButtonText: \"Yes, delete it!\",\n      cancelButtonText: \"No, cancel!\",\n    }).then((result) => {\n      if (result.value) {\n        // TODO delete document\n        try {\n          deleteDoc(doc(db, \"tasks\", id));\n        } catch (e) {\n          console.log(\"Unable to delete task.\");\n        }\n\n        Swal.fire({\n          icon: \"success\",\n          title: \"Deleted!\",\n          text: `Task has been deleted.`,\n          showConfirmButton: false,\n          timer: 1500,\n        });\n\n        const tasksCopy = tasks.filter((task) => task.id !== id);\n        setTasks(tasksCopy);\n      }\n    });\n  };\n\n  const addProject = async () => {\n    if (!newProject) {\n      return Swal.fire({\n        icon: \"error\",\n        title: \"Error!\",\n        text: \"Add a valid Project name.\",\n        showConfirmButton: true,\n      });\n    }\n\n    try {\n      await addDoc(collection(db, \"projects\"), { name: newProject });\n    } catch (e) {\n      console.log(\"Failed to add New Project\");\n    }\n\n    Swal.fire({\n      icon: \"success\",\n      title: \"Added!\",\n      text: `New Project Created!`,\n      showConfirmButton: false,\n      timer: 1500,\n    }).then(() => setNewProject(\"\"));\n  };\n\n  return (\n    <div className=\"container\">\n      {!isAdding && !isEditing && (\n        <>\n          <Header\n            setIsAdding={setIsAdding}\n            setIsAuthenticated={setIsAuthenticated}\n          />\n          <Table\n            tasks={tasks}\n            handleEdit={handleEdit}\n            handleDelete={handleDelete}\n          />\n          <div>\n            <label htmlFor=\"newProject\">Add New Project</label>\n            <input\n              id=\"newProject\"\n              type=\"text\"\n              name=\"newProject\"\n              placeholder={\"New Project Name\"}\n              value={newProject}\n              onChange={(e) => setNewProject(e.target.value)}\n            />\n            <button type=\"submit\" value=\"Add Project\" onClick={addProject}>\n              Add Project\n            </button>\n          </div>\n        </>\n      )}\n      {isAdding && <Add setIsAdding={setIsAdding} getTasks={getTasks} />}\n      {isEditing && (\n        <Edit\n          selectedTask={selectedTask}\n          setIsEditing={setIsEditing}\n          getTasks={getTasks}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}